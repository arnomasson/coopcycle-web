{% extends "@App/admin.html.twig" %}

{% form_theme form 'bootstrap_3_layout.html.twig' %}

{% block breadcrumb %}
{# {% set promotion_coupon = form.vars.data %} #}
{# {% set is_new = (promotion_coupon.id is null) %} #}
<li><a href="{{ path('admin_promotions') }}">{{ 'promotions.breadcrumb'|trans }}</a></li>
{# <li><a href="{{ path('admin_promotion', { id: promotion_coupon.promotion.id }) }}">{{ promotion_coupon.promotion.name }}</a></li> #}
{# {% if is_new %} #}
<li>{{ 'promotions.breadcrumb.new_credit_note'|trans }}</li>
{# {% else %} #}
{# <li>{{ promotion_coupon.code }}</li> #}
{# {% endif %} #}
{% endblock %}

{% block content %}
{{ form_start(form) }}

  <div class="form-group">
    <div id="user-search"></div>
    <span class="help-block">{{ 'form.credit_note.user_search.help'|trans }}</span>
  </div>

  {{ form_widget(form) }}

  <button type="submit" class="btn btn-block btn-primary">
    {{ 'basics.save'|trans }}
  </button>

{{ form_end(form) }}
{% endblock %}

{% block scripts %}
<script>
new CoopCycle.Search(document.querySelector('#user-search'), {
  url: "{{ path('admin_users_search', { format: 'json'  }) }}",
  placeholder: "{{ 'search.users'|trans }}",
  onSuggestionSelected: function(suggestion) {
    $('#credit_note_username').val(suggestion.username);
  }
});
</script>
{% endblock %}
